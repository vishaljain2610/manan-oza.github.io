{"id":"extract-method",
	"actions":[
		{"type":"setStep","options":{"step":1}},
		{"type":"run","options":{"command":"goDocEnd"}},
		{"type":"type","options":{"text":"\n\nvoid printBanner() {\n  System.out.println(\"*****************************\");\n  System.out.println(\"****** Customer totals ******\");\n  System.out.println(\"*****************************\");\n}","delay":20}},
		{"type":"setStep","options":{"step":2}},
		//{"type":"type","options":{"text":"←","delay":500}},
		{"type":"type","options":{"text":"  printBanner();"}},
		//{"type":"readyAndCompile","options":{"text":"At last, we should compile the code to check for possible errors.","text2":"Cause for celebration – we have successfully extracted the first method!","locale":"en"}},
		{"type":"setStep","options":{"step":3}},
		{"type":"run","options":{"command":"goDocEnd"}},
		{"type":"type","options":{"text":"\n\nvoid printDetails() {\n  System.out.println(\"name: \" + name);\n  System.out.println(\"amount: \" + outstanding);\n}","delay":20}},
		{"type":"type","options":{"text":"←","delay":500}},
		{"type":"type","options":{"text":"  printDetails();"}},
		//{"type":"readyAndCompile","options":{"text":"Let's launch the compiler.","text2":"Error! The variable <code>outstanding<\/code> in method <code>printDetails()<\/code> is not defined.","success":false,"locale":"en"}},
		{"type":"moveTo","options":{"place":"text","text":"void printDetails(|||)","delay":0}},
		{"type":"type","options":{"text":"double outstanding"}},
		{"type":"moveTo","options":{"location":"printOwing","place":"text","text":"printDetails(|||)","delay":0}},
		{"type":"type","options":{"text":"outstanding"}},
		//{"type":"readyAndCompile","options":{"text":"Let's launch the compiler.","text2":"A-OK! Let's keep moving.","locale":"en"}},
		{"type":"setStep","options":{"step":4}},
		{"type":"wait","options":{"timeout":"500"}},
		{"type":"run","options":{"command":"goDocEnd"}},
		{"type":"type","options":{"text":"\n\nvoid getOutstanding() {\n  Enumeration elements = orders.elements();\n  double outstanding = 0.0;\n  while (elements.hasMoreElements()) {\n    Order each = (Order) elements.nextElement();\n    outstanding += each.getAmount();\n  }\n}","delay":20}},
		{"type":"type","options":{"text":"","delay":500}},
		{"type":"type","options":{"text":"  getOutstanding();"}},
		{"type":"type","options":{"text":"double","beforeDelay":500}},
		{"type":"moveTo","options":{"location":"getOutstanding","place":"end","delay":0}},
		{"type":"type","options":{"text":"\n  return outstanding;"}},
		{"type":"moveTo","options":{"location":"printOwing","place":"text","text":"|||getOutstanding()","delay":0}},
		{"type":"type","options":{"text":"double outstanding = "}},
		//{"type":"readyAndCompile","options":{"text":"Let's perform the final compilation and testing.","text2":"Wonderful, it's all working!","locale":"en"}},
		{"type":"setStep","options":{"step":-1}},
	],
	"lang":"java",
	"code":"void printOwing() {
		\n  Enumeration elements = orders.elements();
		\n  double outstanding = 0.0;
		\n\n  \/\/ print banner
		\n  System.out.println (\"*****************************\");
		\n  System.out.println (\"****** Customer totals ******\");
		\n  System.out.println (\"*****************************\");
		\n\n  \/\/ print owings
		\n  while (elements.hasMoreElements()) {
		\n    Order each = (Order) elements.nextElement();
		\n    outstanding += each.getAmount();
		\n  }
		\n\n  \/\/ print details
		\n  System.out.println(\"name: \" + name);
		\n  System.out.println(\"amount: \" + outstanding);
		\n}"
		,
		"steps":[
			{"en":"Create a new method and name it in a way that makes its purpose self-evident."},
			{"en":"Copy the relevant code fragment to your new method. Delete the fragment from its old location and put a call for the new method there instead."},
			{"en":"In the new method, create parameters for passing values from the original method."},
			{"en":"Pass the results and other changed data back to the original method."}
		]
	}